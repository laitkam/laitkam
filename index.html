<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Laitkam Upload</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 min-h-screen flex items-center justify-center">
    <div class="bg-white p-8 rounded-lg shadow-md w-full max-w-md">
      
      <!-- Logo and Title -->
      <div class="flex flex-col items-center mb-6">
        <img src="laitkamlogo.png" alt="Laitkam Logo" class="h-20 w-auto mb-2" />
        <h1 class="text-3xl font-bold text-center">Laitkam</h1>
      </div>

      <form id="uploadForm" enctype="multipart/form-data">
        <input
          type="file"
          id="fileInput"
          name="file"
          accept="image/*,application/pdf"
          class="mb-4 w-full"
          onchange="handleFileChange(event)"
        />
        <div id="preview" class="mb-4 flex flex-wrap gap-4"></div>
        <button
          type="submit"
          class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 w-full"
        >
          Upload
        </button>
        <p id="error" class="text-red-500 text-sm mt-2 hidden"></p>
      </form>
    </div>

    <script>
      const form = document.getElementById("uploadForm");
      const preview = document.getElementById("preview");
      const fileInput = document.getElementById("fileInput");
      const error = document.getElementById("error");

      fileInput.addEventListener("click", () => {
        // Clear preview and reset when clicking upload again
        preview.innerHTML = "";
        error.classList.add("hidden");
        fileInput.value = ""; // Reset input value
      });

      function handleFileChange(event) {
        preview.innerHTML = "";
        const file = event.target.files[0];
        if (!file) return;

        if (file.size > 500 * 1024) {
          error.textContent = "File too large. Max 500KB.";
          error.classList.remove("hidden");
          return;
        }

        error.classList.add("hidden");

        if (file.type.startsWith("image/")) {
          const img = document.createElement("img");
          img.src = URL.createObjectURL(file);
          img.className = "h-32 object-contain border rounded p-1";

          const crossBtn = document.createElement("button");
          crossBtn.textContent = "❌";
          crossBtn.className = "text-red-500 ml-2";
          crossBtn.onclick = (e) => {
            e.preventDefault();
            preview.innerHTML = "";
            fileInput.value = "";
          };

          const wrapper = document.createElement("div");
          wrapper.className = "flex items-center gap-2";
          wrapper.appendChild(img);
          wrapper.appendChild(crossBtn);

          preview.appendChild(wrapper);
        } else if (file.type === "application/pdf") {
          const pdfText = document.createElement("p");
          pdfText.textContent = file.name;
          pdfText.className = "text-sm font-medium";

          const crossBtn = document.createElement("button");
          crossBtn.textContent = "❌";
          crossBtn.className = "text-red-500 ml-2";
          crossBtn.onclick = (e) => {
            e.preventDefault();
            preview.innerHTML = "";
            fileInput.value = "";
          };

          const wrapper = document.createElement("div");
          wrapper.className = "flex items-center gap-2";
          wrapper.appendChild(pdfText);
          wrapper.appendChild(crossBtn);

          preview.appendChild(wrapper);
        }
      }

      form.addEventListener("submit", function (e) {
        e.preventDefault();
        alert("File uploaded successfully (simulated).");
      });
    </script>
  </body>
</html>
